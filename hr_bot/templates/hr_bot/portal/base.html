<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}بوابة الموارد البشرية{% endblock %}</title>
    
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.19/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .rtl-flip {
            transform: scaleX(-1);
        }
        
        /* Fix dropdown menu z-index */
        .navbar {
            position: relative;
            z-index: 50;
        }
        
        .navbar details[open] summary ~ * {
            z-index: 50;
        }
        
        /* Fix dropdown menu colors */
        .navbar details ul {
            background-color: white;
            color: black;
        }
        
        .navbar details ul li a:hover {
            background-color: hsl(var(--p));
            color: white;
        }
        
        /* Mobile menu improvements */
        @media (max-width: 768px) {
            .navbar {
                flex-wrap: wrap;
            }
            
            .navbar .flex-1 {
                width: 100%;
                justify-content: center;
                margin-bottom: 0.5rem;
            }
            
            .navbar .flex-none {
                width: 100%;
            }
            
            .navbar .menu-horizontal {
                flex-direction: column;
                width: 100%;
            }
            
            .navbar .menu-horizontal > li {
                width: 100%;
            }
            
            .navbar .menu-horizontal > li > a,
            .navbar .menu-horizontal > li > details > summary {
                justify-content: center;
                padding: 1rem;
                font-size: 1rem;
            }
            
            .navbar details ul {
                position: static;
                width: 100%;
                box-shadow: none;
                border-top: 1px solid #e5e7eb;
            }
            
            .navbar details ul li a {
                padding: 1rem;
                font-size: 0.95rem;
            }
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-base-200">
    <div class="navbar bg-primary text-primary-content shadow-lg">
        <div class="flex-1">
            <a href="{% url 'portal_home' %}" class="btn btn-ghost text-xl">
                <i class="fas fa-building ml-2"></i>
                بوابة الموارد البشرية
            </a>
        </div>
        <div class="flex-none">
            <ul class="menu menu-horizontal px-1">
                <li><a href="{% url 'portal_home' %}"><i class="fas fa-home ml-2"></i>الرئيسية</a></li>
                <li><a href="{% url 'portal_profile' %}"><i class="fas fa-user ml-2"></i>الملف الشخصي</a></li>
                <li>
                    <details>
                        <summary><i class="fas fa-cog ml-2"></i>الخدمات</summary>
                        <ul class="rounded-t-none p-2 text-right shadow-lg">
                            <li><a href="{% url 'portal_family' %}"><i class="fas fa-users ml-2"></i>بيانات العائلة</a></li>
                            <li><a href="{% url 'portal_moahil' %}"><i class="fas fa-graduation-cap ml-2"></i>المؤهلات</a></li>
                            <li><a href="{% url 'portal_bank_account' %}"><i class="fas fa-university ml-2"></i>الحسابات البنكية</a></li>
                        </ul>
                    </details>
                </li>
                <li><a href="{% url 'portal_logout' %}"><i class="fas fa-sign-out-alt ml-2"></i>تسجيل الخروج</a></li>
            </ul>
        </div>
    </div>

    <div class="container mx-auto p-4">
        {% block content %}{% endblock %}
    </div>

    <footer class="footer footer-center p-10 bg-base-300 text-base-content mt-10">
        <aside>
            <i class="fas fa-building text-4xl"></i>
            <p class="font-bold">
                بوابة الموارد البشرية
            </p> 
            <p>جميع الحقوق محفوظة © 2024</p>
        </aside>
    </footer>

    <div id="toast-container" class="toast toast-top toast-end"></div>

    <script>
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `alert alert-${type} shadow-lg`;
            toast.innerHTML = `
                <div>
                    <span>${message}</span>
                </div>
            `;
            
            const container = document.getElementById('toast-container');
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        const csrftoken = getCookie('csrftoken');
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
