{% extends 'fleet/portal/base.html' %}

{% block title %}المركبات - نظام إدارة الأسطول{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-4xl font-bold">
        <i class="fas fa-car"></i> المركبات
    </h1>
</div>

<div class="card bg-base-100 shadow-xl mb-6">
    <div class="card-body">
        <form method="get" class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="form-control">
                <label class="label">
                    <span class="label-text">بحث</span>
                </label>
                <input type="text" name="search" value="{{ search }}" placeholder="رقم اللوحة، الموديل، الشركة..." class="input input-bordered">
            </div>
            
            <div class="form-control">
                <label class="label">
                    <span class="label-text">الحالة</span>
                </label>
                <select name="status" class="select select-bordered">
                    <option value="">الكل</option>
                    {% for status in statuses %}
                    <option value="{{ status.id }}" {% if status_filter|stringformat:"s" == status.id|stringformat:"s" %}selected{% endif %}>
                        {{ status.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-control">
                <label class="label">
                    <span class="label-text">&nbsp;</span>
                </label>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-search"></i> بحث
                </button>
            </div>
        </form>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    {% for vehicle in vehicles %}
    <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow">
        <div class="card-body">
            <h2 class="card-title">
                <i class="fas fa-car"></i> {{ vehicle.license_plate }}
            </h2>
            <div class="space-y-2">
                <p><strong>الموديل:</strong> {{ vehicle.model }}</p>
                <p><strong>السنة:</strong> {{ vehicle.year }}</p>
                <p><strong>نوع الوقود:</strong> {{ vehicle.fuel_type }}</p>
                <p>
                    <strong>الحالة:</strong>
                    <span class="badge badge-primary">{{ vehicle.status }}</span>
                </p>
                {% if vehicle.book_value %}
                <p><strong>القيمة التقديرية:</strong> {{ vehicle.book_value|floatformat:2 }} جنيه</p>
                {% endif %}
            </div>
            <div class="card-actions justify-end mt-4">
                <a href="{% url 'fleet:vehicle_detail' vehicle.pk %}" class="btn btn-primary btn-sm">
                    <i class="fas fa-eye"></i> عرض التفاصيل
                </a>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-span-full text-center py-8">
        <p class="text-gray-500 text-lg">لا توجد مركبات</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
